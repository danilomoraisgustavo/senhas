<!-- public/dashboard.html -->
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>PyDen Senhas • Dashboard</title>
  <link rel="stylesheet" href="css/dashboard.css" />
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <div class="logo-badge">P</div>
      <div class="brand-text">
        <div class="brand-title">PyDen Senhas</div>
        <div class="brand-subtitle">Operação • Atendimento</div>
      </div>
    </div>

    <nav class="topnav">
      <button class="tab active nav-btn" data-target="chamarSenhaSection">Chamar</button>
      <button class="tab nav-btn" data-target="gerarSenhasSection">Gerar</button>
      <button class="tab nav-btn" data-target="cadastrarSenhaSection">Cadastrar</button>
      <button class="tab nav-btn" data-target="gerenciarBDSection">BD</button>
      <a href="/logout" class="logout">Sair</a>
    </nav>
  </header>

  <main class="wrap">

    <!-- CHAMAR -->
    <section id="chamarSenhaSection" class="panel section section-active">
      <div class="panel-head">
        <h2>Chamar próxima senha</h2>
        <p>Use os botões abaixo para chamar a próxima senha na fila.</p>
      </div>

      <div class="grid-actions">
        <button class="btn btn-primary" id="chamarNormal">
          <span class="btn-title">Normal</span>
          <span class="btn-sub">Chamar próxima N</span>
        </button>

        <button class="btn btn-accent" id="chamarPreferencial">
          <span class="btn-title">Preferencial</span>
          <span class="btn-sub">Chamar próxima P</span>
        </button>

        <button class="btn btn-ghost" id="chamarUltima">
          <span class="btn-title">Rechamar</span>
          <span class="btn-sub">Última chamada</span>
        </button>
      </div>

      <div class="card highlight">
        <div class="card-title">Última senha chamada</div>
        <div id="lastCalled" class="big">—</div>
        <div class="muted" id="lastCalledHint">Atualiza em tempo real via painel de atendimento.</div>
      </div>
    </section>

    <!-- GERAR (intervalo) -->
    <section id="gerarSenhasSection" class="panel section section-hidden">
      <div class="panel-head">
        <h2>Gerar senhas por intervalo</h2>
        <p>Geração inteligente: cria várias senhas de uma vez e ignora as que já existirem hoje.</p>
      </div>

      <div class="grid-actions">
        <button class="btn btn-primary" id="gerarNormalRapido">
          <span class="btn-title">Normal</span>
          <span class="btn-sub">1 clique • gera e imprime</span>
        </button>

        <button class="btn btn-accent" id="gerarPreferencialRapido">
          <span class="btn-title">Preferencial</span>
          <span class="btn-sub">1 clique • gera e imprime</span>
        </button>

        <button class="btn btn-ghost" id="abrirIntervalo">
          <span class="btn-title">Intervalo</span>
          <span class="btn-sub">Modo avançado</span>
        </button>
      </div>

      <div class="card">
        <div class="card-title">Resultado</div>
        <div id="msgGerarRapido" class="feedback">Use os botões acima para gerar rapidamente.</div>
      </div>

      <div id="intervaloBox" class="card" style="display:none;">
        <div class="card-title">Gerar por intervalo (avançado)</div>

        <form id="formGerarIntervalo" class="form-grid" style="margin-top:10px;">
          <div class="field">
            <label for="tipoIntervalo">Tipo</label>
            <select id="tipoIntervalo" name="tipo" required>
              <option value="">Selecione</option>
              <option value="N">Normal</option>
              <option value="P">Preferencial</option>
            </select>
          </div>

          <div class="field">
            <label for="inicioIntervalo">Início</label>
            <input id="inicioIntervalo" name="inicio" type="number" min="1" placeholder="Ex.: 1" required />
          </div>

          <div class="field">
            <label for="fimIntervalo">Fim</label>
            <input id="fimIntervalo" name="fim" type="number" min="1" placeholder="Ex.: 50" required />
          </div>

          <div class="field full">
            <button type="submit" class="btn btn-primary full">Gerar intervalo</button>
            <div class="muted small">O sistema ignora números que já existirem hoje.</div>
          </div>
        </form>

        <div id="msgGerarIntervalo" class="feedback"></div>
      </div>

</section>

    <!-- CADASTRAR (unitária) -->
    <section id="cadastrarSenhaSection" class="panel section section-hidden">
      <div class="panel-head">
        <h2>Cadastrar senha manual</h2>
        <p>Cadastre uma senha específica. Se ela já existir hoje, o sistema não duplica.</p>
      </div>

      <div class="card">
        <form id="formCadastroSenhas" class="form-grid">
          <div class="field">
            <label for="tipo">Tipo</label>
            <select name="tipo" id="tipo" required>
              <option value="">Selecione</option>
              <option value="N">Normal</option>
              <option value="P">Preferencial</option>
            </select>
          </div>

          <div class="field">
            <label for="numero">Número</label>
            <input type="number" name="numero" id="numero" min="1" required />
          </div>

          <div class="field full">
            <button type="submit" class="btn btn-primary full">Cadastrar</button>
          </div>
        </form>

        <div id="msgCadastro" class="feedback"></div>
      </div>
    </section>

    <!-- BD -->
    <section id="gerenciarBDSection" class="panel section section-hidden">
      <div class="panel-head">
        <h2>Gerenciar banco de dados</h2>
        <p>Ações administrativas (use com cuidado).</p>
      </div>

      <div class="card">
        <button class="btn btn-danger full" id="limparSenhas">
          Limpar todas as senhas
        </button>
        <div class="muted small">Isso remove toda a fila e reinicia o contador interno.</div>
        <div id="dbMessageContainer" class="feedback"></div>
      </div>
    </section>

  </main>

  <div id="toast" class="toast hidden" role="status" aria-live="polite"></div>

  <script src="/socket.io/socket.io.js"></script>
  <script src="js/dashboard.js"></script>
</body>
</html>
